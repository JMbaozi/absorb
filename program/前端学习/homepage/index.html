<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>JMbaozi</title>
    <link rel="shortcut icon" href="favicon.ico" type="image/x-icon">
    <link rel="stylesheet" href="css/index.css">
    <!--引用百度地图API-->
    <script type="text/javascript" src="http://api.map.baidu.com/api?v=2.0&ak=6Xfh7Gd1CYItnNTegU1PrUHB7UmARAMi"></script>
</head>
<body background="img/memphis-colorful.png">
    <canvas id="canvas"width="1920" height="1080"></canvas>
    <!-- 不建议使用css控制常宽，因为如果设置的宽高与初始比例 300:150 不同，有可能出现扭曲的现象 -->
    <!-- 假如浏览器不支持canvas可以直接 <canvas>您的浏览器不支持canvas</canvas> 浏览器会渲染替代内容 -->
    <!--百度地图容器-->
    <div id="map"></div>
    <div id="touxiang">
        <img src="https://jmbaozi.top/assets/img/touxiang.jpeg" widht="200" height="200">
    </div>
    <div id="name">江盟</div>
    <div id="signature">游戏爱好者，LPL忠实观众，终极白嫖怪，网易云村民</div>
    <div id="introduction">
        <ul>
            <li>自称包子，网名来源于我小学时接触的一款网页游戏《卡布西游》(氪金要从娃娃抓起)，一直沿用至今。    </li>
            <li>2</li>
            <li>3</li>
            <li>4</li>
            <li>5</li>
        </ul>
    </div>
    <div class="top">
        <center> 
            <ul>
                <li><a href="/">首页</a></li>
                <li><a href="https://jmbaozi.top/">博客</a></li>
                <li><a href="http://mail.qq.com/cgi-bin/qm_share?t=qm_mailme&email=Hnx-cWR3fWx6XnhxZnN-d3IwfXFz">邮箱</a></li>
                <li><a href="#"><b>一级菜单</b></a></li>
                <li><a href="#">一级菜单</a></li>
                <li>
                    <a href="#">一级菜单</a>
                    <ul>
                        <li><a href="#">二级菜单</a></li>
                        <li><a href="#">二级菜单</a></li>
                    </ul>
                </li>        
            </ul>
        </center>      
 </div>
</body>
<script type="text/javascript">
    //创建和初始化地图函数：
    function initMap(){
    createMap();//创建地图
    setMapEvent();//设置地图事件
    addMapControl();//向地图添加控件
    addMapOverlay();//向地图添加覆盖物
    }
    function createMap(){ 
    map = new BMap.Map("map"); 
    map.centerAndZoom(new BMap.Point(118.612275,36.889803),16);
    }
    function setMapEvent(){
    map.enableScrollWheelZoom();
    map.enableKeyboard();
    map.enableDragging();
    map.enableDoubleClickZoom()
    }
    function addClickHandler(target,window){
    target.addEventListener("click",function(){
        target.openInfoWindow(window);
    });
    }
    function addMapOverlay(){
    var markers = [
        {content:"青州市何官镇江家村",title:"快乐老家",imageOffset: {width:0,height:3},position:{lat:36.889543,lng:118.609274}}
    ];
    for(var index = 0; index < markers.length; index++ ){
        var point = new BMap.Point(markers[index].position.lng,markers[index].position.lat);
        var marker = new BMap.Marker(point,{icon:new BMap.Icon("http://api.map.baidu.com/lbsapi/createmap/images/icon.png",new BMap.Size(20,25),{
        imageOffset: new BMap.Size(markers[index].imageOffset.width,markers[index].imageOffset.height)
        })});
        var label = new BMap.Label(markers[index].title,{offset: new BMap.Size(25,5)});
        var opts = {
        width: 200,
        title: markers[index].title,
        enableMessage: false
        };
        var infoWindow = new BMap.InfoWindow(markers[index].content,opts);
        marker.setLabel(label);
        addClickHandler(marker,infoWindow);
        map.addOverlay(marker);
    };
    }
    //向地图添加控件
    function addMapControl(){
    var scaleControl = new BMap.ScaleControl({anchor:BMAP_ANCHOR_BOTTOM_LEFT});
    scaleControl.setUnit(BMAP_UNIT_IMPERIAL);
    map.addControl(scaleControl);
    var navControl = new BMap.NavigationControl({anchor:BMAP_ANCHOR_TOP_LEFT,type:3});
    map.addControl(navControl);
    }
    var map;
    initMap();
</script>
<script type="text/javascript">
    class Bubble{ // ES6新增Class语法糖
        constructor(ctx){ // 构造函数
            this.colorList = [[254,158,159], [147,186,255], [217,153,249], [129,199,132], [255,202,98], [255,164,119]]; // 颜色方案
            this.ctx = ctx.getContext("2d"); // 二维绘图
            this.circleList = []; // 气泡数组
        }
        randomInt(a, b) { // 返回随机数
            return Number.parseInt(Math.random() * (b - a + 1) + a);   //取a-b之间包括ab的随机值
        }
        newCircle(){ // 新气泡
            if(this.randomInt(0,80)) return 0; // 控制生成气泡的数量
            var canvasHeight = this.ctx.canvas.height; // 获取画布高度
            var circle = {}; // 定义一个新的气泡对象
            circle.r = this.randomInt(10,50); // 随机半径
            circle.x = this.randomInt(0, this.ctx.canvas.width); // 初始化气泡X坐标
            circle.xMoveSpeed = this.randomInt(-10,10); // X方向移动速度以及方向
            circle.y = canvasHeight + circle.r; // 初始化气泡Y坐标
            circle.yMoveSpeed = this.randomInt(5,10); // Y方向的移动速度
            circle.color = this.colorList[this.randomInt(0,this.colorList.length-1)]; // 获取气泡颜色
            this.circleList.push(circle); // 将对象放入数组
        }
        destroyCircle(){ // 销毁气泡
            this.circleList.forEach((v,i) => {
                if(v.y < -v.r) this.circleList.splice(i,1); // 气泡超过上边界就销毁气泡对象
            })
        }
        draw(){ // 绘制气泡
            this.newCircle(); // 调用产生新气泡 
            this.ctx.clearRect(0,0,this.ctx.canvas.width,this.ctx.canvas.height); // 清空画布
            this.ctx.save(); // 保存画布状态
            this.circleList.forEach( v => {
                this.ctx.beginPath(); // 起始一条路径
                this.ctx.fillStyle = `rgb(${v.color[0]},${v.color[1]},${v.color[2]},0.6)`; // 设置背景颜色
                this.ctx.strokeStyle = `rgb(${v.color[0]},${v.color[1]},${v.color[2]})`; // 设置边线颜色
                this.ctx.arc(v.x,v.y,v.r,0,Math.PI * 2); // 绘制圆 x坐标 y坐标 半径 起始角度 结束角度 顺/逆时针绘制
                this.ctx.fill(); // 绘制填充
                this.ctx.stroke(); // 绘制边线
                v.y -= v.yMoveSpeed * 0.06; // Y轴移动
                v.x += v.xMoveSpeed * 0.03; // X轴移动
            })
            this.ctx.restore(); // 恢复画布状态
            this.destroyCircle(); // 销毁气泡
        }
        start(){
            setInterval(() => {this.draw();},10); // 定时器绘制动画效果
        }
    }
    (function(){
        var ctx = document.getElementById("canvas"); // 获取canvas对象
        var bubble = new Bubble(ctx); // 实例化Bubble
        bubble.start(); // 开始绘制
    })();
</script>
</html>